; generated by Component: ARM Compiler 5.06 update 6 (build 750) Tool: ArmCC [4d3637]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\rvmdk\lib_str.o --asm_dir=.\rvmdk\ --list_dir=.\rvmdk\ --depend=.\rvmdk\lib_str.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime --diag_suppress=9931 -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I.\RTE\_Flash -I"C:\Program Files\0Software\Keil_v5\Arm\Packs\Keil\STM32F1xx_DFP\2.3.0\Device\Include" -I"C:\Program Files\0Software\Keil_v5\ARM\CMSIS\Include" -I"C:\Program Files\0Software\Keil_v5\Arm\Packs\Keil\STM32F1xx_DFP\2.3.0" -D__MICROLIB -D__UVISION_VERSION=528 -DSTM32F10X_MD --omf_browse=.\rvmdk\lib_str.crf ..\..\..\..\..\uC-LIB\lib_str.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=1

                  Str_Len PROC
;;;139    
;;;140    CPU_SIZE_T  Str_Len (CPU_CHAR  *pstr)
000000  2100              MOVS     r1,#0
;;;141    {
000002  e001              B        |L1.8|
                  |L1.4|
;;;142        CPU_SIZE_T  len;
;;;143    
;;;144    
;;;145        len = 0;
;;;146        while (( pstr != (CPU_CHAR *)0) &&                          /* Calc str len until NULL ptr (see Note #2a) ...       */
;;;147               (*pstr != (CPU_CHAR  )0)) {                          /* ... or NULL char found      (see Note #2b).          */
;;;148            len++;
000004  1c49              ADDS     r1,r1,#1
;;;149            pstr++;
000006  1c40              ADDS     r0,r0,#1
                  |L1.8|
000008  b110              CBZ      r0,|L1.16|
00000a  7802              LDRB     r2,[r0,#0]            ;147
00000c  2a00              CMP      r2,#0                 ;147
00000e  d1f9              BNE      |L1.4|
                  |L1.16|
;;;150        }
;;;151    
;;;152        return (len);
000010  4608              MOV      r0,r1
;;;153    }
000012  4770              BX       lr
;;;154    
                          ENDP

                  Str_Copy PROC
;;;193    
;;;194    CPU_CHAR  *Str_Copy (CPU_CHAR  *pdest,
000014  2800              CMP      r0,#0
;;;195                         CPU_CHAR  *psrc)
;;;196    {
000016  d004              BEQ      |L1.34|
;;;197        CPU_CHAR  *pstr;
;;;198        CPU_CHAR  *pstr_next;
;;;199    
;;;200                                                                    /* Rtn NULL if str ptr(s) NULL (see Note #2a).          */
;;;201        if (pdest == (CPU_CHAR *)0) {
;;;202            return  ((CPU_CHAR *)0);
;;;203        }
;;;204        if (psrc  == (CPU_CHAR *)0) {
000018  b129              CBZ      r1,|L1.38|
;;;205            return  ((CPU_CHAR *)0);
;;;206        }
;;;207    
;;;208    
;;;209        pstr      = pdest;
00001a  4602              MOV      r2,r0
;;;210        pstr_next = pstr;
00001c  4610              MOV      r0,r2
;;;211        pstr_next++;
00001e  1c43              ADDS     r3,r0,#1
;;;212        while (( pstr_next != (CPU_CHAR *)0) &&                     /* Copy str until NULL ptr(s) (see Note #2b) ...        */
000020  e008              B        |L1.52|
                  |L1.34|
000022  2000              MOVS     r0,#0                 ;202
;;;213               ( psrc      != (CPU_CHAR *)0) &&
;;;214               (*psrc      != (CPU_CHAR  )0)) {                     /* ... or NULL char found     (see Note #2c).           */
;;;215           *pstr = *psrc;
;;;216            pstr++;
;;;217            pstr_next++;
;;;218            psrc++;
;;;219        }
;;;220    
;;;221       *pstr = (CPU_CHAR)0;                                         /* Append NULL char (see Note #2b2).                    */
;;;222    
;;;223    
;;;224        return (pdest);
;;;225    }
000024  4770              BX       lr
                  |L1.38|
000026  2000              MOVS     r0,#0                 ;205
000028  4770              BX       lr
                  |L1.42|
00002a  f882c000          STRB     r12,[r2,#0]           ;215
00002e  1c52              ADDS     r2,r2,#1              ;216
000030  1c5b              ADDS     r3,r3,#1              ;217
000032  1c49              ADDS     r1,r1,#1              ;218
                  |L1.52|
000034  b12b              CBZ      r3,|L1.66|
000036  b121              CBZ      r1,|L1.66|
000038  f891c000          LDRB     r12,[r1,#0]           ;214
00003c  f1bc0f00          CMP      r12,#0                ;214
000040  d1f3              BNE      |L1.42|
                  |L1.66|
000042  2100              MOVS     r1,#0                 ;221
000044  7011              STRB     r1,[r2,#0]            ;221
000046  4770              BX       lr
;;;226    
                          ENDP

                  Str_Copy_N PROC
;;;272    
;;;273    CPU_CHAR  *Str_Copy_N (CPU_CHAR    *pdest,
000048  b430              PUSH     {r4,r5}
;;;274                           CPU_CHAR    *psrc,
;;;275                           CPU_SIZE_T   len_max)
;;;276    {
;;;277        CPU_CHAR    *pstr;
;;;278        CPU_CHAR    *pstr_next;
;;;279        CPU_SIZE_T   len_copy;
;;;280    
;;;281                                                                    /* Rtn NULL if str ptr(s) NULL      (see Note #2a).     */
;;;282        if (pdest == (CPU_CHAR *)0) {
00004a  2800              CMP      r0,#0
00004c  d007              BEQ      |L1.94|
;;;283            return  ((CPU_CHAR *)0);
;;;284        }
;;;285        if (psrc  == (CPU_CHAR *)0) {
00004e  b149              CBZ      r1,|L1.100|
;;;286            return  ((CPU_CHAR *)0);
;;;287        }
;;;288    
;;;289        if (len_max == (CPU_SIZE_T)0) {                             /* Rtn NULL if copy len equals zero (see Note #2d).     */
000050  b15a              CBZ      r2,|L1.106|
;;;290            return  ((CPU_CHAR *)0);
;;;291        }
;;;292    
;;;293    
;;;294        pstr      = pdest;
000052  4603              MOV      r3,r0
;;;295        pstr_next = pstr;
000054  4618              MOV      r0,r3
;;;296        pstr_next++;
000056  1c44              ADDS     r4,r0,#1
;;;297        len_copy  = 0;
000058  f04f0c00          MOV      r12,#0
;;;298    
;;;299        while (( pstr_next != (CPU_CHAR *)0) &&                     /* Copy str until NULL ptr(s)  (see Note #2b)  ...      */
00005c  e00e              B        |L1.124|
                  |L1.94|
;;;300               ( psrc      != (CPU_CHAR *)0) &&
;;;301               (*psrc      != (CPU_CHAR  )0) &&                     /* ... or NULL char found      (see Note #2c); ...      */
;;;302               ( len_copy  <  (CPU_SIZE_T)len_max)) {               /* ... or max nbr chars copied (see Note #2d).          */
;;;303           *pstr = *psrc;
;;;304            pstr++;
;;;305            pstr_next++;
;;;306            psrc++;
;;;307            len_copy++;
;;;308        }
;;;309    
;;;310       *pstr = (CPU_CHAR)0;                                         /* Append NULL char (see Note #2b2).                    */
;;;311    
;;;312    
;;;313        return (pdest);
;;;314    }
00005e  bc30              POP      {r4,r5}
000060  2000              MOVS     r0,#0                 ;283
000062  4770              BX       lr
                  |L1.100|
000064  bc30              POP      {r4,r5}
000066  2000              MOVS     r0,#0                 ;286
000068  4770              BX       lr
                  |L1.106|
00006a  bc30              POP      {r4,r5}
00006c  2000              MOVS     r0,#0                 ;290
00006e  4770              BX       lr
                  |L1.112|
000070  701d              STRB     r5,[r3,#0]            ;303
000072  1c5b              ADDS     r3,r3,#1              ;304
000074  1c64              ADDS     r4,r4,#1              ;305
000076  1c49              ADDS     r1,r1,#1              ;306
000078  f10c0c01          ADD      r12,r12,#1            ;307
                  |L1.124|
00007c  b124              CBZ      r4,|L1.136|
00007e  b119              CBZ      r1,|L1.136|
000080  780d              LDRB     r5,[r1,#0]            ;301
000082  b10d              CBZ      r5,|L1.136|
000084  4594              CMP      r12,r2                ;302
000086  d3f3              BCC      |L1.112|
                  |L1.136|
000088  2100              MOVS     r1,#0                 ;310
00008a  7019              STRB     r1,[r3,#0]            ;310
00008c  bc30              POP      {r4,r5}
00008e  4770              BX       lr
;;;315    
                          ENDP

                  Str_Cat PROC
;;;357    
;;;358    CPU_CHAR  *Str_Cat (CPU_CHAR  *pdest,
000090  2800              CMP      r0,#0
;;;359                        CPU_CHAR  *pstr_cat)
;;;360    {
000092  d002              BEQ      |L1.154|
;;;361        CPU_CHAR  *pstr;
;;;362        CPU_CHAR  *pstr_next;
;;;363    
;;;364                                                                    /* Rtn NULL if str ptr(s) NULL (see Note #2a).          */
;;;365        if (pdest == (CPU_CHAR *)0) {
;;;366            return  ((CPU_CHAR *)0);
;;;367        }
;;;368        if (pstr_cat == (CPU_CHAR *)0) {
000094  b119              CBZ      r1,|L1.158|
;;;369            return  ((CPU_CHAR *)0);
;;;370        }
;;;371    
;;;372    
;;;373        pstr = pdest;
000096  4602              MOV      r2,r0
;;;374        while (( pstr != (CPU_CHAR *)0) &&                          /* Adv to end of cur dest str until NULL ptr ...        */
000098  e004              B        |L1.164|
                  |L1.154|
00009a  2000              MOVS     r0,#0                 ;366
;;;375               (*pstr != (CPU_CHAR  )0)) {                          /* ... or NULL char found..                             */
;;;376            pstr++;
;;;377        }
;;;378        if (pstr == (CPU_CHAR *)0) {                                /* If NULL str overrun, rtn NULL (see Note #2b).        */
;;;379            return ((CPU_CHAR *)0);
;;;380        }
;;;381    
;;;382        pstr_next = pstr;
;;;383        pstr_next++;
;;;384        while (( pstr_next != (CPU_CHAR *)0) &&                     /* Cat str until NULL ptr(s) (see Note #2c) ...         */
;;;385               ( pstr_cat  != (CPU_CHAR *)0) &&
;;;386               (*pstr_cat  != (CPU_CHAR  )0)) {                     /* ... or NULL char found    (see Note #2d).            */
;;;387           *pstr = *pstr_cat;
;;;388            pstr++;
;;;389            pstr_next++;
;;;390            pstr_cat++;
;;;391        }
;;;392    
;;;393       *pstr = (CPU_CHAR)0;                                         /* Append NULL char (see Note #2c2).                    */
;;;394    
;;;395    
;;;396        return (pdest);
;;;397    }
00009c  4770              BX       lr
                  |L1.158|
00009e  2000              MOVS     r0,#0                 ;369
0000a0  4770              BX       lr
                  |L1.162|
0000a2  1c52              ADDS     r2,r2,#1              ;376
                  |L1.164|
0000a4  b112              CBZ      r2,|L1.172|
0000a6  7813              LDRB     r3,[r2,#0]            ;375
0000a8  2b00              CMP      r3,#0                 ;375
0000aa  d1fa              BNE      |L1.162|
                  |L1.172|
0000ac  b10a              CBZ      r2,|L1.178|
0000ae  1c53              ADDS     r3,r2,#1              ;383
0000b0  e006              B        |L1.192|
                  |L1.178|
0000b2  2000              MOVS     r0,#0                 ;379
0000b4  4770              BX       lr
                  |L1.182|
0000b6  f882c000          STRB     r12,[r2,#0]           ;387
0000ba  1c52              ADDS     r2,r2,#1              ;388
0000bc  1c5b              ADDS     r3,r3,#1              ;389
0000be  1c49              ADDS     r1,r1,#1              ;390
                  |L1.192|
0000c0  b12b              CBZ      r3,|L1.206|
0000c2  b121              CBZ      r1,|L1.206|
0000c4  f891c000          LDRB     r12,[r1,#0]           ;386
0000c8  f1bc0f00          CMP      r12,#0                ;386
0000cc  d1f3              BNE      |L1.182|
                  |L1.206|
0000ce  2100              MOVS     r1,#0                 ;393
0000d0  7011              STRB     r1,[r2,#0]            ;393
0000d2  4770              BX       lr
;;;398    
                          ENDP

                  Str_Cat_N PROC
;;;447    /*$PAGE*/
;;;448    CPU_CHAR  *Str_Cat_N (CPU_CHAR    *pdest,
0000d4  b430              PUSH     {r4,r5}
;;;449                          CPU_CHAR    *pstr_cat,
;;;450                          CPU_SIZE_T   len_max)
;;;451    {
;;;452        CPU_CHAR    *pstr;
;;;453        CPU_CHAR    *pstr_next;
;;;454        CPU_SIZE_T   len_cat;
;;;455    
;;;456                                                                    /* Rtn NULL if str ptr(s) NULL     (see Note #2a).      */
;;;457        if (pdest == (CPU_CHAR *)0) {
0000d6  2800              CMP      r0,#0
0000d8  d003              BEQ      |L1.226|
;;;458            return  ((CPU_CHAR *)0);
;;;459        }
;;;460        if (pstr_cat == (CPU_CHAR *)0) {
0000da  b129              CBZ      r1,|L1.232|
;;;461            return  ((CPU_CHAR *)0);
;;;462        }
;;;463    
;;;464        if (len_max == (CPU_SIZE_T)0) {                             /* Rtn NULL if cat len equals zero (see Note #2e).      */
0000dc  b13a              CBZ      r2,|L1.238|
;;;465            return  ((CPU_CHAR *)0);
;;;466        }
;;;467    
;;;468    
;;;469        pstr = pdest;
0000de  4603              MOV      r3,r0
;;;470        while (( pstr != (CPU_CHAR *)0) &&                          /* Adv to end of cur dest str until NULL ptr ...        */
0000e0  e009              B        |L1.246|
                  |L1.226|
;;;471               (*pstr != (CPU_CHAR  )0)) {                          /* ... or NULL char found..                             */
;;;472            pstr++;
;;;473        }
;;;474        if (pstr == (CPU_CHAR *)0) {                                /* If NULL str overrun, rtn NULL (see Note #2b).        */
;;;475            return ((CPU_CHAR *)0);
;;;476        }
;;;477    
;;;478        pstr_next = pstr;
;;;479        pstr_next++;
;;;480        len_cat   = 0;
;;;481    
;;;482        while (( pstr_next != (CPU_CHAR *)0) &&                     /* Cat str until NULL ptr(s)  (see Note #2c)  ...       */
;;;483               ( pstr_cat  != (CPU_CHAR *)0) &&
;;;484               (*pstr_cat  != (CPU_CHAR  )0) &&                     /* ... or NULL char found     (see Note #2d); ...       */
;;;485               ( len_cat   <  (CPU_SIZE_T)len_max)) {               /* ... or max nbr chars cat'd (see Note #2d).           */
;;;486           *pstr = *pstr_cat;
;;;487            pstr++;
;;;488            pstr_next++;
;;;489            pstr_cat++;
;;;490            len_cat++;
;;;491        }
;;;492    
;;;493       *pstr = (CPU_CHAR)0;                                         /* Append NULL char (see Note #2c2).                    */
;;;494    
;;;495    
;;;496        return (pdest);
;;;497    }
0000e2  bc30              POP      {r4,r5}
0000e4  2000              MOVS     r0,#0                 ;458
0000e6  4770              BX       lr
                  |L1.232|
0000e8  bc30              POP      {r4,r5}
0000ea  2000              MOVS     r0,#0                 ;461
0000ec  4770              BX       lr
                  |L1.238|
0000ee  bc30              POP      {r4,r5}
0000f0  2000              MOVS     r0,#0                 ;465
0000f2  4770              BX       lr
                  |L1.244|
0000f4  1c5b              ADDS     r3,r3,#1              ;472
                  |L1.246|
0000f6  b123              CBZ      r3,|L1.258|
0000f8  f893c000          LDRB     r12,[r3,#0]           ;471
0000fc  f1bc0f00          CMP      r12,#0                ;471
000100  d1f8              BNE      |L1.244|
                  |L1.258|
000102  b11b              CBZ      r3,|L1.268|
000104  1c5c              ADDS     r4,r3,#1              ;479
000106  f04f0c00          MOV      r12,#0                ;480
00010a  e008              B        |L1.286|
                  |L1.268|
00010c  bc30              POP      {r4,r5}
00010e  2000              MOVS     r0,#0                 ;475
000110  4770              BX       lr
                  |L1.274|
000112  701d              STRB     r5,[r3,#0]            ;486
000114  1c5b              ADDS     r3,r3,#1              ;487
000116  1c64              ADDS     r4,r4,#1              ;488
000118  1c49              ADDS     r1,r1,#1              ;489
00011a  f10c0c01          ADD      r12,r12,#1            ;490
                  |L1.286|
00011e  b124              CBZ      r4,|L1.298|
000120  b119              CBZ      r1,|L1.298|
000122  780d              LDRB     r5,[r1,#0]            ;484
000124  b10d              CBZ      r5,|L1.298|
000126  4594              CMP      r12,r2                ;485
000128  d3f3              BCC      |L1.274|
                  |L1.298|
00012a  2100              MOVS     r1,#0                 ;493
00012c  7019              STRB     r1,[r3,#0]            ;493
00012e  bc30              POP      {r4,r5}
000130  4770              BX       lr
;;;498    
                          ENDP

                  Str_Cmp PROC
;;;559    /*$PAGE*/
;;;560    CPU_INT16S  Str_Cmp (CPU_CHAR  *p1_str,
000132  b410              PUSH     {r4}
;;;561                         CPU_CHAR  *p2_str)
;;;562    {
;;;563        CPU_CHAR    *p1_str_next;
;;;564        CPU_CHAR    *p2_str_next;
;;;565        CPU_INT16S   cmp_val;
;;;566    
;;;567    
;;;568        if (p1_str == (CPU_CHAR *)0) {
000134  2800              CMP      r0,#0
000136  d003              BEQ      |L1.320|
;;;569            if (p2_str == (CPU_CHAR *)0) {
;;;570                return ((CPU_INT16S)0);                             /* If BOTH str ptrs NULL, rtn 0 (see Note #2a).         */
;;;571            }
;;;572            cmp_val = (CPU_INT16S)0 - (CPU_INT16S)(*p2_str);
;;;573            return (cmp_val);                                       /* If p1_str NULL, rtn neg p2_str val (see Note #2b).   */
;;;574        }
;;;575        if (p2_str == (CPU_CHAR *)0) {
000138  b151              CBZ      r1,|L1.336|
;;;576            cmp_val = (CPU_INT16S)(*p1_str);
;;;577            return (cmp_val);                                       /* If p2_str NULL, rtn pos p1_str val (see Note #2c).   */
;;;578        }
;;;579    
;;;580    
;;;581        p1_str_next = p1_str;
;;;582        p2_str_next = p2_str;
;;;583        p1_str_next++;
00013a  1c42              ADDS     r2,r0,#1
;;;584        p2_str_next++;
00013c  1c4b              ADDS     r3,r1,#1
;;;585        while ((*p1_str      == *p2_str)       &&                   /* Cmp strs until non-matching char (see Note #2d) ..   */
00013e  e00e              B        |L1.350|
                  |L1.320|
000140  b119              CBZ      r1,|L1.330|
000142  7808              LDRB     r0,[r1,#0]            ;572
000144  4240              RSBS     r0,r0,#0              ;572
;;;586               (*p1_str      != (CPU_CHAR  )0) &&                   /* .. or NULL char(s)               (see Note #2e) ..   */
;;;587               ( p1_str_next != (CPU_CHAR *)0) &&                   /* .. or NULL ptr(s) found (see Notes #2f, #2g, & #2h). */
;;;588               ( p2_str_next != (CPU_CHAR *)0)) {
;;;589            p1_str_next++;
;;;590            p2_str_next++;
;;;591            p1_str++;
;;;592            p2_str++;
;;;593        }
;;;594    
;;;595    
;;;596        if (*p1_str != *p2_str) {                                           /* If strs NOT identical, ...                   */
;;;597             cmp_val = (CPU_INT16S)(*p1_str) - (CPU_INT16S)(*p2_str);       /* ... calc & rtn char diff  (see Note #2d1).   */
;;;598    
;;;599        } else if (*p1_str == (CPU_CHAR)0) {                                /* If NULL char(s) found, ...                   */
;;;600             cmp_val = 0;                                                   /* ... strs identical; rtn 0 (see Note #2e).    */
;;;601    
;;;602        } else {
;;;603            if (p1_str_next == (CPU_CHAR *)0) {
;;;604                if (p2_str_next == (CPU_CHAR *)0) {                         /* If BOTH next str ptrs NULL, ...              */
;;;605                    cmp_val = (CPU_INT16S)0;                                /* ... rtn 0                   (see Note #2f).  */
;;;606                } else {                                                    /* If p1_str_next NULL, ...                     */
;;;607                    cmp_val = (CPU_INT16S)0 - (CPU_INT16S)(*p2_str_next);   /* ... rtn neg p2_str_next val (see Note #2g).  */
;;;608                }
;;;609            } else {                                                        /* If p2_str_next NULL, ...                     */
;;;610                cmp_val = (CPU_INT16S)(*p1_str_next);                       /* ... rtn pos p1_str_next val (see Note #2h).  */
;;;611            }
;;;612        }
;;;613    
;;;614    
;;;615        return (cmp_val);
;;;616    }
000146  bc10              POP      {r4}
000148  4770              BX       lr
                  |L1.330|
00014a  bc10              POP      {r4}
00014c  2000              MOVS     r0,#0                 ;570
00014e  4770              BX       lr
                  |L1.336|
000150  7800              LDRB     r0,[r0,#0]            ;576
000152  bc10              POP      {r4}
000154  4770              BX       lr
                  |L1.342|
000156  1c52              ADDS     r2,r2,#1              ;589
000158  1c5b              ADDS     r3,r3,#1              ;590
00015a  1c40              ADDS     r0,r0,#1              ;591
00015c  1c49              ADDS     r1,r1,#1              ;592
                  |L1.350|
00015e  f890c000          LDRB     r12,[r0,#0]           ;585
000162  780c              LDRB     r4,[r1,#0]            ;585
000164  45a4              CMP      r12,r4                ;585
000166  d105              BNE      |L1.372|
000168  f1bc0f00          CMP      r12,#0                ;586
00016c  d002              BEQ      |L1.372|
00016e  b10a              CBZ      r2,|L1.372|
000170  2b00              CMP      r3,#0                 ;588
000172  d1f0              BNE      |L1.342|
                  |L1.372|
000174  7804              LDRB     r4,[r0,#0]            ;596
000176  7808              LDRB     r0,[r1,#0]            ;596
000178  4284              CMP      r4,r0                 ;596
00017a  d003              BEQ      |L1.388|
00017c  bc10              POP      {r4}
00017e  ebac0000          SUB      r0,r12,r0             ;597
000182  4770              BX       lr
                  |L1.388|
000184  f1bc0f00          CMP      r12,#0                ;599
000188  d003              BEQ      |L1.402|
00018a  b12a              CBZ      r2,|L1.408|
00018c  7810              LDRB     r0,[r2,#0]            ;610
00018e  bc10              POP      {r4}
000190  4770              BX       lr
                  |L1.402|
000192  bc10              POP      {r4}
000194  2000              MOVS     r0,#0                 ;600
000196  4770              BX       lr
                  |L1.408|
000198  b11b              CBZ      r3,|L1.418|
00019a  7818              LDRB     r0,[r3,#0]            ;607
00019c  bc10              POP      {r4}
00019e  4240              RSBS     r0,r0,#0              ;607
0001a0  4770              BX       lr
                  |L1.418|
0001a2  bc10              POP      {r4}
0001a4  2000              MOVS     r0,#0                 ;605
0001a6  4770              BX       lr
;;;617    
                          ENDP

                  Str_Cmp_N PROC
;;;686    /*$PAGE*/
;;;687    CPU_INT16S  Str_Cmp_N (CPU_CHAR    *p1_str,
0001a8  b470              PUSH     {r4-r6}
;;;688                           CPU_CHAR    *p2_str,
;;;689                           CPU_SIZE_T   len_max)
;;;690    {
;;;691        CPU_CHAR    *p1_str_next;
;;;692        CPU_CHAR    *p2_str_next;
;;;693        CPU_INT16S   cmp_val;
;;;694        CPU_SIZE_T   cmp_len;
;;;695    
;;;696    
;;;697        if (len_max == 0) {                                         /* If cmp len equals zero, rtn 0      (see Note #2i).   */
0001aa  2a00              CMP      r2,#0
0001ac  d006              BEQ      |L1.444|
;;;698            return ((CPU_INT16S)0);
;;;699        }
;;;700    
;;;701        if (p1_str == (CPU_CHAR *)0) {
0001ae  b140              CBZ      r0,|L1.450|
;;;702            if (p2_str == (CPU_CHAR *)0) {
;;;703                return ((CPU_INT16S)0);                             /* If BOTH str ptrs NULL,  rtn 0      (see Note #2a).   */
;;;704            }
;;;705            cmp_val = (CPU_INT16S)0 - (CPU_INT16S)(*p2_str);
;;;706            return (cmp_val);                                       /* If p1_str NULL, rtn neg p2_str val (see Note #2b).   */
;;;707        }
;;;708        if (p2_str == (CPU_CHAR *)0) {
0001b0  b179              CBZ      r1,|L1.466|
;;;709            cmp_val = (CPU_INT16S)(*p1_str);
;;;710            return (cmp_val);                                       /* If p2_str NULL, rtn pos p1_str val (see Note #2c).   */
;;;711        }
;;;712    
;;;713    
;;;714        p1_str_next = p1_str;
;;;715        p2_str_next = p2_str;
;;;716        p1_str_next++;
0001b2  1c43              ADDS     r3,r0,#1
;;;717        p2_str_next++;
0001b4  f1010c01          ADD      r12,r1,#1
;;;718        cmp_len     = 0;
0001b8  2400              MOVS     r4,#0
;;;719        while ((*p1_str      == *p2_str)       &&                   /* Cmp strs until non-matching char (see Note #2d) ..   */
0001ba  e013              B        |L1.484|
                  |L1.444|
;;;720               (*p1_str      != (CPU_CHAR  )0) &&                   /* .. or NULL char(s)               (see Note #2e) ..   */
;;;721               ( p1_str_next != (CPU_CHAR *)0) &&                   /* .. or NULL ptr(s) found (see Notes #2f, #2g, & #2h); */
;;;722               ( p2_str_next != (CPU_CHAR *)0) &&
;;;723               ( cmp_len     <  (CPU_SIZE_T)len_max)) {             /* .. or len nbr chars cmp'd        (see Note #2j).     */
;;;724            p1_str_next++;
;;;725            p2_str_next++;
;;;726            p1_str++;
;;;727            p2_str++;
;;;728            cmp_len++;
;;;729        }
;;;730    
;;;731    
;;;732        if (cmp_len == len_max) {                                           /* If strs     identical for len nbr of chars,  */
;;;733            return ((CPU_INT16S)0);                                         /* ... rtn 0 (see Note #2j).                    */
;;;734        }
;;;735    
;;;736        if (*p1_str != *p2_str) {                                           /* If strs NOT identical, ...                   */
;;;737             cmp_val = (CPU_INT16S)(*p1_str) - (CPU_INT16S)(*p2_str);       /* ... calc & rtn char diff  (see Note #2d1).   */
;;;738    
;;;739        } else if (*p1_str == (CPU_CHAR)0) {                                /* If NULL char(s) found, ...                   */
;;;740             cmp_val = 0;                                                   /* ... strs identical; rtn 0 (see Note #2e).    */
;;;741    
;;;742        } else {
;;;743            if (p1_str_next == (CPU_CHAR *)0) {
;;;744                if (p2_str_next == (CPU_CHAR *)0) {                         /* If BOTH next str ptrs NULL, ...              */
;;;745                    cmp_val = (CPU_INT16S)0;                                /* ... rtn 0                   (see Note #2f).  */
;;;746                } else {                                                    /* If p1_str_next NULL, ...                     */
;;;747                    cmp_val = (CPU_INT16S)0 - (CPU_INT16S)(*p2_str_next);   /* ... rtn neg p2_str_next val (see Note #2g).  */
;;;748                }
;;;749            } else {                                                        /* If p2_str_next NULL, ...                     */
;;;750                cmp_val = (CPU_INT16S)(*p1_str_next);                       /* ... rtn pos p1_str_next val (see Note #2h).  */
;;;751            }
;;;752        }
;;;753    
;;;754    
;;;755        return (cmp_val);
;;;756    }
0001bc  bc70              POP      {r4-r6}
0001be  2000              MOVS     r0,#0                 ;698
0001c0  4770              BX       lr
                  |L1.450|
0001c2  b119              CBZ      r1,|L1.460|
0001c4  7808              LDRB     r0,[r1,#0]            ;705
0001c6  4240              RSBS     r0,r0,#0              ;705
0001c8  bc70              POP      {r4-r6}
0001ca  4770              BX       lr
                  |L1.460|
0001cc  bc70              POP      {r4-r6}
0001ce  2000              MOVS     r0,#0                 ;703
0001d0  4770              BX       lr
                  |L1.466|
0001d2  7800              LDRB     r0,[r0,#0]            ;709
0001d4  bc70              POP      {r4-r6}
0001d6  4770              BX       lr
                  |L1.472|
0001d8  1c5b              ADDS     r3,r3,#1              ;724
0001da  f10c0c01          ADD      r12,r12,#1            ;725
0001de  1c40              ADDS     r0,r0,#1              ;726
0001e0  1c49              ADDS     r1,r1,#1              ;727
0001e2  1c64              ADDS     r4,r4,#1              ;728
                  |L1.484|
0001e4  7805              LDRB     r5,[r0,#0]            ;719
0001e6  780e              LDRB     r6,[r1,#0]            ;719
0001e8  42b5              CMP      r5,r6                 ;719
0001ea  d106              BNE      |L1.506|
0001ec  b12d              CBZ      r5,|L1.506|
0001ee  b123              CBZ      r3,|L1.506|
0001f0  f1bc0f00          CMP      r12,#0                ;722
0001f4  d001              BEQ      |L1.506|
0001f6  4294              CMP      r4,r2                 ;723
0001f8  d3ee              BCC      |L1.472|
                  |L1.506|
0001fa  4294              CMP      r4,r2                 ;732
0001fc  d102              BNE      |L1.516|
0001fe  bc70              POP      {r4-r6}
000200  2000              MOVS     r0,#0                 ;733
000202  4770              BX       lr
                  |L1.516|
000204  7802              LDRB     r2,[r0,#0]            ;736
000206  7808              LDRB     r0,[r1,#0]            ;736
000208  4282              CMP      r2,r0                 ;736
00020a  d002              BEQ      |L1.530|
00020c  1a28              SUBS     r0,r5,r0              ;737
00020e  bc70              POP      {r4-r6}
000210  4770              BX       lr
                  |L1.530|
000212  b11d              CBZ      r5,|L1.540|
000214  b12b              CBZ      r3,|L1.546|
000216  7818              LDRB     r0,[r3,#0]            ;750
000218  bc70              POP      {r4-r6}
00021a  4770              BX       lr
                  |L1.540|
00021c  bc70              POP      {r4-r6}
00021e  2000              MOVS     r0,#0                 ;740
000220  4770              BX       lr
                  |L1.546|
000222  f1bc0f00          CMP      r12,#0                ;744
000226  d004              BEQ      |L1.562|
000228  f89c0000          LDRB     r0,[r12,#0]           ;747
00022c  bc70              POP      {r4-r6}
00022e  4240              RSBS     r0,r0,#0              ;747
000230  4770              BX       lr
                  |L1.562|
000232  bc70              POP      {r4-r6}
000234  2000              MOVS     r0,#0                 ;745
000236  4770              BX       lr
;;;757    
                          ENDP

                  Str_Char PROC
;;;795    
;;;796    CPU_CHAR  *Str_Char (CPU_CHAR  *pstr,
000238  2800              CMP      r0,#0
;;;797                         CPU_CHAR   srch_char)
;;;798    {
00023a  d001              BEQ      |L1.576|
;;;799        CPU_CHAR  *pstr_next;
;;;800    
;;;801    
;;;802        if (pstr == (CPU_CHAR *)0) {                                /* Rtn NULL if srch str ptr NULL (see Note #2a).        */
;;;803            return ((CPU_CHAR *)0);
;;;804        }
;;;805    
;;;806    
;;;807        pstr_next = pstr;
;;;808        pstr_next++;
00023c  1c42              ADDS     r2,r0,#1
;;;809        while (( pstr_next != (CPU_CHAR *)0) &&                     /* Srch str until NULL ptr(s) (see Note #2b) ...        */
00023e  e003              B        |L1.584|
                  |L1.576|
000240  2000              MOVS     r0,#0                 ;803
                  |L1.578|
;;;810               (*pstr      != (CPU_CHAR  )0) &&                     /* ... or NULL char           (see Note #2c) ...        */
;;;811               (*pstr      != (CPU_CHAR  )srch_char)) {             /* ... or srch char found     (see Note #2d).           */
;;;812            pstr++;
;;;813            pstr_next++;
;;;814        }
;;;815    
;;;816    
;;;817        if (*pstr != srch_char) {                                   /* If srch char NOT found, str points to NULL; ...      */
;;;818            return ((CPU_CHAR *)0);                                 /* ... rtn NULL (see Notes #2b & #2c).                  */
;;;819        }
;;;820    
;;;821        return (pstr);                                              /* Else rtn ptr to found srch char (see Note #2d).      */
;;;822    }
000242  4770              BX       lr
                  |L1.580|
000244  1c40              ADDS     r0,r0,#1              ;812
000246  1c52              ADDS     r2,r2,#1              ;813
                  |L1.584|
000248  b11a              CBZ      r2,|L1.594|
00024a  7803              LDRB     r3,[r0,#0]            ;810
00024c  b10b              CBZ      r3,|L1.594|
00024e  428b              CMP      r3,r1                 ;811
000250  d1f8              BNE      |L1.580|
                  |L1.594|
000252  7802              LDRB     r2,[r0,#0]            ;817
000254  428a              CMP      r2,r1                 ;817
000256  d0f4              BEQ      |L1.578|
000258  2000              MOVS     r0,#0                 ;818
00025a  4770              BX       lr
;;;823    
                          ENDP

                  Str_Char_N PROC
;;;871    
;;;872    CPU_CHAR  *Str_Char_N (CPU_CHAR    *pstr,
00025c  b410              PUSH     {r4}
;;;873                           CPU_SIZE_T   len_max,
;;;874                           CPU_CHAR     srch_char)
;;;875    {
;;;876        CPU_CHAR    *pstr_next;
;;;877        CPU_SIZE_T   len_srch;
;;;878    
;;;879    
;;;880        if (pstr == (CPU_CHAR *)0) {                                /* Rtn NULL if srch str ptr NULL    (see Note #2a).     */
00025e  2800              CMP      r0,#0
000260  d004              BEQ      |L1.620|
;;;881            return ((CPU_CHAR *)0);
;;;882        }
;;;883    
;;;884        if (len_max == (CPU_SIZE_T)0) {                             /* Rtn NULL if srch len equals zero (see Note #2e).     */
000262  b131              CBZ      r1,|L1.626|
;;;885            return ((CPU_CHAR *)0);
;;;886        }
;;;887    
;;;888    
;;;889        pstr_next = pstr;
;;;890        pstr_next++;
000264  f1000c01          ADD      r12,r0,#1
;;;891        len_srch  = 0;
000268  2300              MOVS     r3,#0
;;;892        while (( pstr_next != (CPU_CHAR *)0)         &&             /* Srch str until NULL ptr(s)  (see Note #2b)  ...      */
00026a  e009              B        |L1.640|
                  |L1.620|
;;;893               (*pstr      != (CPU_CHAR  )0)         &&             /* ... or NULL char            (see Note #2c)  ...      */
;;;894               (*pstr      != (CPU_CHAR  )srch_char) &&             /* ... or srch char found      (see Note #2d); ...      */
;;;895               ( len_srch  <  (CPU_SIZE_T)len_max)) {               /* ... or max nbr chars srch'd (see Note #2e).          */
;;;896            pstr++;
;;;897            pstr_next++;
;;;898            len_srch++;
;;;899        }
;;;900    
;;;901    
;;;902        if (*pstr != srch_char) {                                   /* If srch char NOT found, str points to NULL; ...      */
;;;903            return ((CPU_CHAR *)0);                                 /* ... rtn NULL (see Notes #2b & #2c).                  */
;;;904        }
;;;905    
;;;906        return (pstr);                                              /* Else rtn ptr to found srch char (see Note #2d).      */
;;;907    }
00026c  bc10              POP      {r4}
00026e  2000              MOVS     r0,#0                 ;881
000270  4770              BX       lr
                  |L1.626|
000272  2000              MOVS     r0,#0                 ;885
                  |L1.628|
000274  bc10              POP      {r4}
000276  4770              BX       lr
                  |L1.632|
000278  1c40              ADDS     r0,r0,#1              ;896
00027a  f10c0c01          ADD      r12,r12,#1            ;897
00027e  1c5b              ADDS     r3,r3,#1              ;898
                  |L1.640|
000280  f1bc0f00          CMP      r12,#0                ;892
000284  d005              BEQ      |L1.658|
000286  7804              LDRB     r4,[r0,#0]            ;893
000288  b11c              CBZ      r4,|L1.658|
00028a  4294              CMP      r4,r2                 ;894
00028c  d001              BEQ      |L1.658|
00028e  428b              CMP      r3,r1                 ;895
000290  d3f2              BCC      |L1.632|
                  |L1.658|
000292  7801              LDRB     r1,[r0,#0]            ;902
000294  4291              CMP      r1,r2                 ;902
000296  d0ed              BEQ      |L1.628|
000298  bc10              POP      {r4}
00029a  2000              MOVS     r0,#0                 ;903
00029c  4770              BX       lr
;;;908    
                          ENDP

                  Str_Char_Last PROC
;;;947    
;;;948    CPU_CHAR  *Str_Char_Last (CPU_CHAR  *pstr,
00029e  b510              PUSH     {r4,lr}
;;;949                              CPU_CHAR   srch_char)
;;;950    {
0002a0  4603              MOV      r3,r0
0002a2  460c              MOV      r4,r1
;;;951        CPU_CHAR    *pstr_next;
;;;952        CPU_SIZE_T   str_len;
;;;953    
;;;954    
;;;955        if (pstr == (CPU_CHAR *)0) {                                /* Rtn NULL if srch str ptr NULL (see Note #2a).        */
0002a4  2b00              CMP      r3,#0
0002a6  d004              BEQ      |L1.690|
;;;956            return ((CPU_CHAR *)0);
;;;957        }
;;;958    
;;;959    
;;;960        pstr_next  = pstr;
;;;961        str_len    = Str_Len(pstr);
0002a8  4618              MOV      r0,r3
0002aa  f7fffffe          BL       Str_Len
;;;962        pstr_next += str_len;
0002ae  4418              ADD      r0,r0,r3
;;;963        while (( pstr_next != pstr) &&                              /* Srch str from end until beg (see Note #2c) ...       */
0002b0  e002              B        |L1.696|
                  |L1.690|
0002b2  2000              MOVS     r0,#0                 ;956
                  |L1.692|
;;;964               (*pstr_next != srch_char)) {                         /* ... until srch char found   (see Note #2d).          */
;;;965            pstr_next--;
;;;966        }
;;;967    
;;;968    
;;;969        if (*pstr_next != srch_char) {                              /* If srch char NOT found, str points to NULL; ...      */
;;;970            return ((CPU_CHAR *)0);                                 /* ... rtn NULL (see Notes #2b & #2c).                  */
;;;971        }
;;;972    
;;;973        return (pstr_next);                                         /* Else rtn ptr to found srch char (see Note #2d).      */
;;;974    }
0002b4  bd10              POP      {r4,pc}
                  |L1.694|
0002b6  1e40              SUBS     r0,r0,#1              ;965
                  |L1.696|
0002b8  4298              CMP      r0,r3                 ;963
0002ba  d002              BEQ      |L1.706|
0002bc  7802              LDRB     r2,[r0,#0]            ;964
0002be  42a2              CMP      r2,r4                 ;964
0002c0  d1f9              BNE      |L1.694|
                  |L1.706|
0002c2  7801              LDRB     r1,[r0,#0]            ;969
0002c4  42a1              CMP      r1,r4                 ;969
0002c6  d0f5              BEQ      |L1.692|
0002c8  2000              MOVS     r0,#0                 ;970
0002ca  bd10              POP      {r4,pc}
;;;975    
                          ENDP

                  Str_Str PROC
;;;1017   
;;;1018   CPU_CHAR  *Str_Str (CPU_CHAR  *pstr,
0002cc  e92d43f0          PUSH     {r4-r9,lr}
;;;1019                       CPU_CHAR  *psrch_str)
;;;1020   {
0002d0  4605              MOV      r5,r0
0002d2  4689              MOV      r9,r1
;;;1021       CPU_SIZE_T    str_len;
;;;1022       CPU_SIZE_T    srch_str_len;
;;;1023       CPU_SIZE_T    srch_len;
;;;1024       CPU_SIZE_T    srch_ix;
;;;1025       CPU_BOOLEAN   srch_done;
;;;1026       CPU_INT16S    srch_cmp;
;;;1027       CPU_CHAR     *pstr_srch_ix;
;;;1028   
;;;1029                                                                   /* Rtn NULL if str ptr(s) NULL (see Note #2a).          */
;;;1030       if (pstr == (CPU_CHAR *)0) {
0002d4  2d00              CMP      r5,#0
0002d6  d00f              BEQ      |L1.760|
;;;1031           return ((CPU_CHAR *)0);
;;;1032       }
;;;1033       if (psrch_str == (CPU_CHAR *)0) {
0002d8  f1b90f00          CMP      r9,#0
0002dc  d00f              BEQ      |L1.766|
;;;1034           return ((CPU_CHAR *)0);
;;;1035       }
;;;1036   
;;;1037   
;;;1038       str_len      = Str_Len(pstr);
0002de  4628              MOV      r0,r5
0002e0  f7fffffe          BL       Str_Len
0002e4  4604              MOV      r4,r0
;;;1039       srch_str_len = Str_Len(psrch_str);
0002e6  4648              MOV      r0,r9
0002e8  f7fffffe          BL       Str_Len
0002ec  4606              MOV      r6,r0
;;;1040       if (srch_str_len > str_len) {                               /* If srch str len > str len, rtn NULL  (see Note #2b). */
0002ee  42a6              CMP      r6,r4
0002f0  d908              BLS      |L1.772|
;;;1041           return ((CPU_CHAR *)0);
0002f2  2000              MOVS     r0,#0
;;;1042       }
;;;1043       if (srch_str_len == 0) {                                    /* If srch str len = 0, srch str equal NULL str; ...    */
;;;1044           pstr_srch_ix = (CPU_CHAR *)(pstr + str_len);            /* ... rtn ptr to NULL str found in str (see Note #2c). */
;;;1045           return (pstr_srch_ix);
;;;1046       }
;;;1047   
;;;1048       srch_len  = str_len - srch_str_len;                         /* Determine srch len (see Note #2d1).                  */
;;;1049       srch_ix   = 0;
;;;1050       srch_done = DEF_NO;
;;;1051       while ((srch_done == DEF_NO) && (srch_ix <= srch_len)) {
;;;1052           pstr_srch_ix = (CPU_CHAR *)(pstr + srch_ix);
;;;1053           srch_cmp     =  Str_Cmp_N(pstr_srch_ix, psrch_str, srch_str_len);
;;;1054           srch_done    = (srch_cmp == 0) ? DEF_YES : DEF_NO;
;;;1055           srch_ix++;
;;;1056       }
;;;1057   
;;;1058   
;;;1059       if (srch_cmp != 0) {                                        /* If srch str NOT found, rtn NULL  (see Note #2d).     */
;;;1060           return ((CPU_CHAR *)0);
;;;1061       }
;;;1062   
;;;1063       return (pstr_srch_ix);                                      /* Rtn ptr to srch str found in str (see Note #2e).     */
;;;1064   }
0002f4  e8bd83f0          POP      {r4-r9,pc}
                  |L1.760|
0002f8  2000              MOVS     r0,#0                 ;1031
0002fa  e8bd83f0          POP      {r4-r9,pc}
                  |L1.766|
0002fe  2000              MOVS     r0,#0                 ;1034
000300  e8bd83f0          POP      {r4-r9,pc}
                  |L1.772|
000304  b11e              CBZ      r6,|L1.782|
000306  1ba7              SUBS     r7,r4,r6              ;1048
000308  2400              MOVS     r4,#0                 ;1049
00030a  2000              MOVS     r0,#0                 ;1050
00030c  e00e              B        |L1.812|
                  |L1.782|
00030e  1928              ADDS     r0,r5,r4              ;1044
000310  e8bd83f0          POP      {r4-r9,pc}
                  |L1.788|
000314  eb050804          ADD      r8,r5,r4              ;1052
000318  4632              MOV      r2,r6                 ;1053
00031a  4649              MOV      r1,r9                 ;1053
00031c  4640              MOV      r0,r8                 ;1053
00031e  f7fffffe          BL       Str_Cmp_N
000322  4603              MOV      r3,r0                 ;1053
000324  0018              MOVS     r0,r3                 ;1054
000326  d003              BEQ      |L1.816|
000328  2000              MOVS     r0,#0                 ;1054
                  |L1.810|
00032a  1c64              ADDS     r4,r4,#1              ;1055
                  |L1.812|
00032c  b110              CBZ      r0,|L1.820|
00032e  e003              B        |L1.824|
                  |L1.816|
000330  2001              MOVS     r0,#1                 ;1054
000332  e7fa              B        |L1.810|
                  |L1.820|
000334  42bc              CMP      r4,r7                 ;1051
000336  d9ed              BLS      |L1.788|
                  |L1.824|
000338  b113              CBZ      r3,|L1.832|
00033a  2000              MOVS     r0,#0                 ;1060
00033c  e8bd83f0          POP      {r4-r9,pc}
                  |L1.832|
000340  4640              MOV      r0,r8                 ;1063
000342  e8bd83f0          POP      {r4-r9,pc}
;;;1065   
                          ENDP

