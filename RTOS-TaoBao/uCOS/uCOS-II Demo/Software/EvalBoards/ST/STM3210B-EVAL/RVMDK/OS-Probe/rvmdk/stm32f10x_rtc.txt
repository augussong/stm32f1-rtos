; generated by Component: ARM Compiler 5.06 update 6 (build 750) Tool: ArmCC [4d3637]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\rvmdk\stm32f10x_rtc.o --asm_dir=.\rvmdk\ --list_dir=.\rvmdk\ --depend=.\rvmdk\stm32f10x_rtc.d --cpu=Cortex-M3 --apcs=interwork -O1 -Otime --diag_suppress=9931 -I. -I..\BSP -I..\..\..\..\..\uCOS-II\Ports\arm-cortex-m3\Generic\RealView -I..\..\..\..\..\uCOS-II\Source -I..\..\..\..\..\CPU\ST\STM32\inc -I..\..\..\..\..\uC-CPU -I..\..\..\..\..\uC-CPU\Arm-Cortex-M3\RealView -I..\..\..\..\..\uC-LIB -I..\..\..\..\..\uC-Probe\Target\Plugins\uCOS-II -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\Source -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Ports\ST\STM32 -I..\..\..\..\..\uC-Probe\Target\Communication\Generic\RS-232\Source -I.\RTE\_Flash -I"C:\Program Files\0Software\Keil_v5\Arm\Packs\Keil\STM32F1xx_DFP\2.3.0\Device\Include" -I"C:\Program Files\0Software\Keil_v5\ARM\CMSIS\Include" -I"C:\Program Files\0Software\Keil_v5\Arm\Packs\Keil\STM32F1xx_DFP\2.3.0" -D__MICROLIB -D__UVISION_VERSION=528 -DSTM32F10X_MD --omf_browse=.\rvmdk\stm32f10x_rtc.crf ..\..\..\..\..\CPU\ST\STM32\src\stm32f10x_rtc.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  RTC_ITConfig PROC
;;;46     *******************************************************************************/
;;;47     void RTC_ITConfig(u16 RTC_IT, FunctionalState NewState)
000000  4a3e              LDR      r2,|L1.252|
;;;48     {
;;;49       /* Check the parameters */
;;;50       assert_param(IS_RTC_IT(RTC_IT));  
;;;51       assert_param(IS_FUNCTIONAL_STATE(NewState));
;;;52       
;;;53       if (NewState != DISABLE)
000002  2900              CMP      r1,#0
000004  d003              BEQ      |L1.14|
;;;54       {
;;;55         RTC->CRH |= RTC_IT;
000006  8811              LDRH     r1,[r2,#0]
000008  4308              ORRS     r0,r0,r1
00000a  8010              STRH     r0,[r2,#0]
;;;56       }
;;;57       else
;;;58       {
;;;59         RTC->CRH &= (u16)~RTC_IT;
;;;60       }
;;;61     }
00000c  4770              BX       lr
                  |L1.14|
00000e  8811              LDRH     r1,[r2,#0]            ;59
000010  ea210000          BIC      r0,r1,r0              ;59
000014  8010              STRH     r0,[r2,#0]            ;59
000016  4770              BX       lr
;;;62     
                          ENDP

                  RTC_EnterConfigMode PROC
;;;69     *******************************************************************************/
;;;70     void RTC_EnterConfigMode(void)
000018  4839              LDR      r0,|L1.256|
;;;71     {
;;;72       /* Set the CNF flag to enter in the Configuration Mode */
;;;73       RTC->CRL |= CRL_CNF_Set;
00001a  8801              LDRH     r1,[r0,#0]
00001c  f0410110          ORR      r1,r1,#0x10
000020  8001              STRH     r1,[r0,#0]
;;;74     }
000022  4770              BX       lr
;;;75     
                          ENDP

                  RTC_ExitConfigMode PROC
;;;82     *******************************************************************************/
;;;83     void RTC_ExitConfigMode(void)
000024  4836              LDR      r0,|L1.256|
;;;84     {
;;;85       /* Reset the CNF flag to exit from the Configuration Mode */
;;;86       RTC->CRL &= CRL_CNF_Reset;
000026  8801              LDRH     r1,[r0,#0]
000028  f0210110          BIC      r1,r1,#0x10
00002c  8001              STRH     r1,[r0,#0]
;;;87     }
00002e  4770              BX       lr
;;;88     
                          ENDP

                  RTC_GetCounter PROC
;;;95     *******************************************************************************/
;;;96     u32 RTC_GetCounter(void)
000030  4834              LDR      r0,|L1.260|
;;;97     {
;;;98       u16 tmp = 0;
;;;99       tmp = RTC->CNTL;
000032  8800              LDRH     r0,[r0,#0]
;;;100    
;;;101      return (((u32)RTC->CNTH << 16 ) | tmp) ;
000034  4934              LDR      r1,|L1.264|
000036  8809              LDRH     r1,[r1,#0]
000038  ea404001          ORR      r0,r0,r1,LSL #16
;;;102    }
00003c  4770              BX       lr
;;;103    
                          ENDP

                  RTC_SetCounter PROC
;;;110    *******************************************************************************/
;;;111    void RTC_SetCounter(u32 CounterValue)
00003e  b500              PUSH     {lr}
;;;112    { 
000040  4602              MOV      r2,r0
;;;113      RTC_EnterConfigMode();
000042  f7fffffe          BL       RTC_EnterConfigMode
;;;114    
;;;115      /* Set RTC COUNTER MSB word */
;;;116      RTC->CNTH = CounterValue >> 16;
000046  4930              LDR      r1,|L1.264|
000048  0c10              LSRS     r0,r2,#16
00004a  8008              STRH     r0,[r1,#0]
;;;117      /* Set RTC COUNTER LSB word */
;;;118      RTC->CNTL = (CounterValue & RTC_LSB_Mask);
00004c  1d08              ADDS     r0,r1,#4
00004e  8002              STRH     r2,[r0,#0]
;;;119    
;;;120      RTC_ExitConfigMode();
000050  f85deb04          POP      {lr}
000054  e7fe              B        RTC_ExitConfigMode
;;;121    }
;;;122    
                          ENDP

                  RTC_SetPrescaler PROC
;;;129    *******************************************************************************/
;;;130    void RTC_SetPrescaler(u32 PrescalerValue)
000056  b500              PUSH     {lr}
;;;131    {
000058  4602              MOV      r2,r0
;;;132      /* Check the parameters */
;;;133      assert_param(IS_RTC_PRESCALER(PrescalerValue));
;;;134      
;;;135      RTC_EnterConfigMode();
00005a  f7fffffe          BL       RTC_EnterConfigMode
;;;136    
;;;137      /* Set RTC PRESCALER MSB word */
;;;138      RTC->PRLH = (PrescalerValue & PRLH_MSB_Mask) >> 16;
00005e  492b              LDR      r1,|L1.268|
000060  f3c24003          UBFX     r0,r2,#16,#4
000064  8008              STRH     r0,[r1,#0]
;;;139      /* Set RTC PRESCALER LSB word */
;;;140      RTC->PRLL = (PrescalerValue & RTC_LSB_Mask);
000066  1d08              ADDS     r0,r1,#4
000068  8002              STRH     r2,[r0,#0]
;;;141    
;;;142      RTC_ExitConfigMode();
00006a  f85deb04          POP      {lr}
00006e  e7fe              B        RTC_ExitConfigMode
;;;143    }
;;;144    
                          ENDP

                  RTC_SetAlarm PROC
;;;151    *******************************************************************************/
;;;152    void RTC_SetAlarm(u32 AlarmValue)
000070  b500              PUSH     {lr}
;;;153    {  
000072  4602              MOV      r2,r0
;;;154      RTC_EnterConfigMode();
000074  f7fffffe          BL       RTC_EnterConfigMode
;;;155    
;;;156      /* Set the ALARM MSB word */
;;;157      RTC->ALRH = AlarmValue >> 16;
000078  4925              LDR      r1,|L1.272|
00007a  0c10              LSRS     r0,r2,#16
00007c  8008              STRH     r0,[r1,#0]
;;;158      /* Set the ALARM LSB word */
;;;159      RTC->ALRL = (AlarmValue & RTC_LSB_Mask);
00007e  1d08              ADDS     r0,r1,#4
000080  8002              STRH     r2,[r0,#0]
;;;160    
;;;161      RTC_ExitConfigMode();
000082  f85deb04          POP      {lr}
000086  e7fe              B        RTC_ExitConfigMode
;;;162    }
;;;163    
                          ENDP

                  RTC_GetDivider PROC
;;;170    *******************************************************************************/
;;;171    u32 RTC_GetDivider(void)
000088  4822              LDR      r0,|L1.276|
;;;172    {
;;;173      u32 tmp = 0x00;
;;;174    
;;;175      tmp = ((u32)RTC->DIVH & (u32)0x000F) << 16;
00008a  8800              LDRH     r0,[r0,#0]
00008c  0700              LSLS     r0,r0,#28
00008e  0b00              LSRS     r0,r0,#12
;;;176      tmp |= RTC->DIVL;
000090  4921              LDR      r1,|L1.280|
000092  8809              LDRH     r1,[r1,#0]
000094  4308              ORRS     r0,r0,r1
;;;177    
;;;178      return tmp;
;;;179    }
000096  4770              BX       lr
;;;180    
                          ENDP

                  RTC_WaitForLastTask PROC
;;;188    *******************************************************************************/
;;;189    void RTC_WaitForLastTask(void)
000098  4819              LDR      r0,|L1.256|
                  |L1.154|
;;;190    {
;;;191      /* Loop until RTOFF flag is set */
;;;192      while ((RTC->CRL & RTC_FLAG_RTOFF) == (u16)RESET)
00009a  8801              LDRH     r1,[r0,#0]
00009c  f0110f20          TST      r1,#0x20
0000a0  d0fb              BEQ      |L1.154|
;;;193      {
;;;194      }
;;;195    }
0000a2  4770              BX       lr
;;;196    
                          ENDP

                  RTC_WaitForSynchro PROC
;;;206    *******************************************************************************/
;;;207    void RTC_WaitForSynchro(void)
0000a4  4816              LDR      r0,|L1.256|
;;;208    {
;;;209      /* Clear RSF flag */
;;;210      RTC->CRL &= (u16)~RTC_FLAG_RSF;
0000a6  8801              LDRH     r1,[r0,#0]
0000a8  f0210108          BIC      r1,r1,#8
0000ac  8001              STRH     r1,[r0,#0]
                  |L1.174|
;;;211    
;;;212      /* Loop until RSF flag is set */
;;;213      while ((RTC->CRL & RTC_FLAG_RSF) == (u16)RESET)
0000ae  8801              LDRH     r1,[r0,#0]
0000b0  f0110f08          TST      r1,#8
0000b4  d0fb              BEQ      |L1.174|
;;;214      {
;;;215      }
;;;216    }
0000b6  4770              BX       lr
;;;217    
                          ENDP

                  RTC_GetFlagStatus PROC
;;;230    *******************************************************************************/
;;;231    FlagStatus RTC_GetFlagStatus(u16 RTC_FLAG)
0000b8  4601              MOV      r1,r0
;;;232    {
;;;233      FlagStatus bitstatus = RESET;
0000ba  2000              MOVS     r0,#0
;;;234      
;;;235      /* Check the parameters */
;;;236      assert_param(IS_RTC_GET_FLAG(RTC_FLAG)); 
;;;237      
;;;238      if ((RTC->CRL & RTC_FLAG) != (u16)RESET)
0000bc  4a10              LDR      r2,|L1.256|
0000be  8812              LDRH     r2,[r2,#0]
0000c0  420a              TST      r2,r1
0000c2  d000              BEQ      |L1.198|
;;;239      {
;;;240        bitstatus = SET;
0000c4  2001              MOVS     r0,#1
                  |L1.198|
;;;241      }
;;;242      else
;;;243      {
;;;244        bitstatus = RESET;
;;;245      }
;;;246      return bitstatus;
;;;247    }
0000c6  4770              BX       lr
;;;248    
                          ENDP

                  RTC_ClearFlag PROC
;;;261    *******************************************************************************/
;;;262    void RTC_ClearFlag(u16 RTC_FLAG)
0000c8  490d              LDR      r1,|L1.256|
;;;263    {
;;;264      /* Check the parameters */
;;;265      assert_param(IS_RTC_CLEAR_FLAG(RTC_FLAG)); 
;;;266        
;;;267      /* Clear the coressponding RTC flag */
;;;268      RTC->CRL &= (u16)~RTC_FLAG;
0000ca  880a              LDRH     r2,[r1,#0]
0000cc  ea220000          BIC      r0,r2,r0
0000d0  8008              STRH     r0,[r1,#0]
;;;269    }
0000d2  4770              BX       lr
;;;270    
                          ENDP

                  RTC_GetITStatus PROC
;;;281    *******************************************************************************/
;;;282    ITStatus RTC_GetITStatus(u16 RTC_IT)
0000d4  490a              LDR      r1,|L1.256|
;;;283    {
;;;284      ITStatus bitstatus = RESET;
;;;285    
;;;286      /* Check the parameters */
;;;287      assert_param(IS_RTC_GET_IT(RTC_IT)); 
;;;288      
;;;289      bitstatus = (ITStatus)(RTC->CRL & RTC_IT);
0000d6  8809              LDRH     r1,[r1,#0]
0000d8  b2c2              UXTB     r2,r0
0000da  4011              ANDS     r1,r1,r2
;;;290    
;;;291      if (((RTC->CRH & RTC_IT) != (u16)RESET) && (bitstatus != (u16)RESET))
0000dc  4a07              LDR      r2,|L1.252|
0000de  8812              LDRH     r2,[r2,#0]
0000e0  4202              TST      r2,r0
0000e2  d002              BEQ      |L1.234|
0000e4  b109              CBZ      r1,|L1.234|
;;;292      {
;;;293        bitstatus = SET;
0000e6  2001              MOVS     r0,#1
;;;294      }
;;;295      else
;;;296      {
;;;297        bitstatus = RESET;
;;;298      }
;;;299      return bitstatus;
;;;300    }
0000e8  4770              BX       lr
                  |L1.234|
0000ea  2000              MOVS     r0,#0                 ;297
0000ec  4770              BX       lr
;;;301    
                          ENDP

                  RTC_ClearITPendingBit PROC
;;;312    *******************************************************************************/
;;;313    void RTC_ClearITPendingBit(u16 RTC_IT)
0000ee  4904              LDR      r1,|L1.256|
;;;314    {
;;;315      /* Check the parameters */
;;;316      assert_param(IS_RTC_IT(RTC_IT));  
;;;317      
;;;318      /* Clear the coressponding RTC pending bit */
;;;319      RTC->CRL &= (u16)~RTC_IT;
0000f0  880a              LDRH     r2,[r1,#0]
0000f2  ea220000          BIC      r0,r2,r0
0000f6  8008              STRH     r0,[r1,#0]
;;;320    }
0000f8  4770              BX       lr
;;;321    
                          ENDP

0000fa  0000              DCW      0x0000
                  |L1.252|
                          DCD      0x40002800
                  |L1.256|
                          DCD      0x40002804
                  |L1.260|
                          DCD      0x4000281c
                  |L1.264|
                          DCD      0x40002818
                  |L1.268|
                          DCD      0x40002808
                  |L1.272|
                          DCD      0x40002820
                  |L1.276|
                          DCD      0x40002810
                  |L1.280|
                          DCD      0x40002814
